stages:
  - build
  - test

build:
  stage: build
  script:
    - 'test -f frontend/index.html'
    - echo "Phase 1 CI"

# test:
#   stage: test
#   image: node:20
#   before_script:
#     - cd frontend
#     # The .npmrc file will handle the legacy-peer-deps automatically
#     - npm install
#   script:
#     - npm run test:ci-simple
#     - echo "Test verification complete"

test_selenium:
  stage: test
  image: python:3.9-slim
  before_script:
    - apt-get update && apt-get install -y wget curl unzip gnupg
    - apt-get install -y chromium
    - pip install --upgrade pip
    - cd frontend/selenium_tests
    - pip install -r requirements.txt # Install dependencies, including webdriver-manager
  script:
    - python -c "from webdriver_manager.chrome import ChromeDriverManager; print(ChromeDriverManager().install())" # Ensure correct ChromeDriver is fetched
    - pytest selenium_test.py # Run the tests with pytest





# test_postman:
#     stage: test
#     image: 
#       name: postman/newman:alpine
#       entrypoint: [""]
#     before_script:
#       - cd backend
#     script:
#       - newman run wildwareness_api.json



